---
import Button from "./ui/Button.astro";
---

<section
    id="home"
    class="relative min-h-screen flex items-center justify-center px-4 overflow-hidden pt-20"
>
    <!-- Canvas pour les particules interactives -->
    <canvas id="particleCanvas" class="absolute inset-0 w-full h-full"></canvas>

    <!-- Gradient overlay subtil -->
    <div class="absolute inset-0 bg-gradient-to-b from-dark-900/50 via-transparent to-dark-900/80 pointer-events-none"></div>

    <!-- Contenu -->
    <div
        class="relative z-10 text-center max-w-4xl mx-auto animate-fade-up pb-16 sm:pb-0"
    >
        <!-- Salutation anim√©e -->
        <div class="mb-6 animate-fade-down">
            <span
                class="inline-block px-4 py-2 rounded-full glass text-primary-400 text-sm font-medium"
            >
                üëã
            </span>
        </div>

        <!-- Titre principal -->
        <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">
            Bonjour, je suis
            <span class="gradient-text block mt-2">
                Baptiste TABAR LABONNE
            </span>
        </h1>

        <!-- Sous-titre avec effet typing -->
        <div class="text-xl md:text-2xl text-dark-300 mb-8 h-8">
            <span id="typing-text" class="border-r-2 border-primary-500"></span>
        </div>

        <!-- Description -->
        <p
            class="text-lg md:text-xl text-dark-400 mb-12 max-w-2xl mx-auto leading-relaxed"
        >
            Je suis apprenti en Mast√®re Architecte Web et je cr√©e des
            applications pens√©es avant tout pour √™tre agr√©ables √† utiliser.
            J‚Äôaime rendre les choses claires, fluides et fiables, autant dans le
            code que dans l‚Äôexp√©rience propos√©e aux utilisateurs.
        </p>

        <!-- CTA Buttons -->
        <div
            class="flex flex-col sm:flex-row items-center justify-center gap-4"
        >
            <Button href="#projects" variant="primary" size="lg">
                <svg
                    class="w-5 h-5 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    ></path>
                </svg>
                Voir mes projets
            </Button>
            <Button href="#contact" variant="outline" size="lg">
                <svg
                    class="w-5 h-5 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    ></path>
                </svg>
                Me contacter
            </Button>
        </div>
    </div>

    <!-- Scroll indicator (positioned relative to the section, bottom center) -->
    <!-- <div
        class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce z-20"
    >
        <a
            href="#about"
            class="text-dark-400 hover:text-primary-400 transition-colors"
            aria-label="Aller √† la section √Ä propos"
        >
            <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
            </svg>
        </a>
    </div> -->
</section>

<script>
    // Effet de typing
    const texts = [
        "D√©veloppeur Fullstack",
        "Architecte Web",
        "Ing√©nieur d√©veloppement",
        "Consultant informatique",
    ];
    let textIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typingElement = document.getElementById("typing-text");

    function type() {
        const currentText = texts[textIndex];

        if (isDeleting) {
            typingElement!.textContent = currentText.substring(
                0,
                charIndex - 1,
            );
            charIndex--;
        } else {
            typingElement!.textContent = currentText.substring(
                0,
                charIndex + 1,
            );
            charIndex++;
        }

        let timeout = isDeleting ? 50 : 100;

        if (!isDeleting && charIndex === currentText.length) {
            timeout = 2000;
            isDeleting = true;
        } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            textIndex = (textIndex + 1) % texts.length;
            timeout = 500;
        }

        setTimeout(type, timeout);
    }

    // D√©marrer l'animation apr√®s un court d√©lai
    setTimeout(() => {
        type();
    }, 500);

    // Syst√®me de particules spatial avec galaxies, √©toiles et plan√®tes
    const canvas = document.getElementById("particleCanvas") as HTMLCanvasElement;
    const ctx = canvas.getContext("2d")!;
    
    // Ajuster la taille du canvas
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    // Position de la souris
    const mouse = {
        x: -1000,
        y: -1000,
        radius: 180
    };

    // √âcouter les mouvements de souris sur toute la page
    document.addEventListener("mousemove", (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
    });

    document.addEventListener("mouseleave", () => {
        mouse.x = -1000;
        mouse.y = -1000;
    });

    // Types d'objets c√©lestes
    type CelestialType = 'star' | 'planet' | 'galaxy' | 'nebula';

    // Classe pour les objets c√©lestes
    class CelestialBody {
        x: number;
        y: number;
        baseX: number;
        baseY: number;
        vx: number;
        vy: number;
        size: number;
        opacity: number;
        type: CelestialType;
        color: string;
        rotation: number;
        rotationSpeed: number;
        glowSize: number;

        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.baseX = this.x;
            this.baseY = this.y;
            this.vx = (Math.random() - 0.5) * 0.3;
            this.vy = (Math.random() - 0.5) * 0.3;
            this.rotation = Math.random() * Math.PI * 2;
            this.rotationSpeed = (Math.random() - 0.5) * 0.02;

            // D√©finir le type et les caract√©ristiques
            const rand = Math.random();
            if (rand < 0.6) {
                // √âtoiles (60%)
                this.type = 'star';
                this.size = Math.random() * 2 + 0.5;
                this.opacity = Math.random() * 0.8 + 0.2;
                this.color = this.getStarColor();
                this.glowSize = this.size * 3;
            } else if (rand < 0.8) {
                // Plan√®tes (20%)
                this.type = 'planet';
                this.size = Math.random() * 8 + 4;
                this.opacity = Math.random() * 0.4 + 0.5;
                this.color = this.getPlanetColor();
                this.glowSize = this.size * 1.5;
            } else if (rand < 0.95) {
                // Galaxies (15%)
                this.type = 'galaxy';
                this.size = Math.random() * 30 + 20;
                this.opacity = Math.random() * 0.3 + 0.2;
                this.color = 'rgba(138, 43, 226, ';
                this.glowSize = this.size;
            } else {
                // N√©buleuses (5%)
                this.type = 'nebula';
                this.size = Math.random() * 40 + 30;
                this.opacity = Math.random() * 0.2 + 0.1;
                this.color = this.getNebulaColor();
                this.glowSize = this.size;
            }
        }

        getStarColor() {
            const colors = [
                'rgba(255, 255, 255, ',
                'rgba(173, 216, 230, ',
                'rgba(255, 218, 185, ',
                'rgba(255, 192, 203, ',
                'rgba(135, 206, 250, '
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        getPlanetColor() {
            const colors = [
                'rgba(255, 140, 0, ',
                'rgba(100, 149, 237, ',
                'rgba(210, 105, 30, ',
                'rgba(70, 130, 180, ',
                'rgba(188, 143, 143, '
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        getNebulaColor() {
            const colors = [
                'rgba(147, 51, 234, ',
                'rgba(219, 39, 119, ',
                'rgba(59, 130, 246, ',
                'rgba(167, 139, 250, '
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        update() {
            // Mouvement de base
            this.baseX += this.vx;
            this.baseY += this.vy;
            this.rotation += this.rotationSpeed;

            // Rebond sur les bords
            if (this.baseX < -50 || this.baseX > canvas.width + 50) this.vx *= -1;
            if (this.baseY < -50 || this.baseY > canvas.height + 50) this.vy *= -1;

            // Interaction avec la souris - effet de r√©pulsion liquide
            const dx = mouse.x - this.baseX;
            const dy = mouse.y - this.baseY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < mouse.radius) {
                const force = (mouse.radius - distance) / mouse.radius;
                const angle = Math.atan2(dy, dx);
                const repelStrength = this.type === 'star' ? 40 : 
                                     this.type === 'planet' ? 60 : 80;
                const repelX = Math.cos(angle) * force * repelStrength;
                const repelY = Math.sin(angle) * force * repelStrength;
                
                this.x = this.baseX - repelX;
                this.y = this.baseY - repelY;
            } else {
                // Retour fluide vers la position de base
                this.x += (this.baseX - this.x) * 0.05;
                this.y += (this.baseY - this.y) * 0.05;
            }
        }

        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation);

            if (this.type === 'star') {
                // Effet de lueur pour les √©toiles
                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.glowSize);
                gradient.addColorStop(0, this.color + this.opacity + ')');
                gradient.addColorStop(0.5, this.color + (this.opacity * 0.5) + ')');
                gradient.addColorStop(1, this.color + '0)');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(0, 0, this.glowSize, 0, Math.PI * 2);
                ctx.fill();

                // Scintillement
                const twinkle = Math.sin(Date.now() * 0.003 + this.x) * 0.3 + 0.7;
                ctx.fillStyle = this.color + (this.opacity * twinkle) + ')';
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();

            } else if (this.type === 'planet') {
                // Plan√®te avec anneau parfois
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.color + this.opacity + ')';
                ctx.fillStyle = this.color + this.opacity + ')';
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();

                // Ajout d'ombres pour le relief
                const shadowGradient = ctx.createRadialGradient(-this.size/3, -this.size/3, 0, 0, 0, this.size);
                shadowGradient.addColorStop(0, 'rgba(255, 255, 255, 0.3)');
                shadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0.3)');
                ctx.fillStyle = shadowGradient;
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();

                // Anneau pour certaines plan√®tes
                if (Math.random() > 0.7) {
                    ctx.strokeStyle = this.color + (this.opacity * 0.5) + ')';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.ellipse(0, 0, this.size * 1.8, this.size * 0.4, Math.PI / 4, 0, Math.PI * 2);
                    ctx.stroke();
                }

            } else if (this.type === 'galaxy') {
                // Galaxie spirale
                ctx.shadowBlur = 20;
                ctx.shadowColor = this.color + this.opacity + ')';
                
                for (let i = 0; i < 50; i++) {
                    const angle = (i / 50) * Math.PI * 4;
                    const radius = (i / 50) * this.size;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius * 0.5;
                    const starSize = (1 - i/50) * 2;
                    
                    ctx.fillStyle = this.color + (this.opacity * (1 - i/50)) + ')';
                    ctx.beginPath();
                    ctx.arc(x, y, starSize, 0, Math.PI * 2);
                    ctx.fill();
                }

            } else if (this.type === 'nebula') {
                // N√©buleuse diffuse
                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size);
                gradient.addColorStop(0, this.color + this.opacity + ')');
                gradient.addColorStop(0.5, this.color + (this.opacity * 0.5) + ')');
                gradient.addColorStop(1, this.color + '0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();

                // Couche suppl√©mentaire pour l'effet de profondeur
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.size * 0.3, -this.size * 0.2, this.size * 0.7, 0, Math.PI * 2);
                ctx.fill();
            }

            ctx.restore();
        }
    }

    // Cr√©er les objets c√©lestes
    const celestialBodies: CelestialBody[] = [];
    const bodyCount = 120;
    
    for (let i = 0; i < bodyCount; i++) {
        celestialBodies.push(new CelestialBody());
    }

    // Ajouter des √©toiles filantes occasionnelles
    class ShootingStar {
        x: number;
        y: number;
        length: number;
        speed: number;
        opacity: number;
        angle: number;

        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height * 0.5;
            this.length = Math.random() * 80 + 40;
            this.speed = Math.random() * 10 + 15;
            this.opacity = 1;
            this.angle = Math.PI / 4;
        }

        update() {
            this.x += Math.cos(this.angle) * this.speed;
            this.y += Math.sin(this.angle) * this.speed;
            this.opacity -= 0.02;
        }

        draw() {
            ctx.save();
            ctx.strokeStyle = `rgba(255, 255, 255, ${this.opacity})`;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 10;
            ctx.shadowColor = 'rgba(255, 255, 255, 0.8)';
            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.lineTo(this.x - Math.cos(this.angle) * this.length, 
                       this.y - Math.sin(this.angle) * this.length);
            ctx.stroke();
            ctx.restore();
        }
    }

    let shootingStars: ShootingStar[] = [];

    // Animation
    function animate() {
        // Fond spatial d√©grad√©
        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
        gradient.addColorStop(0, '#000814');
        gradient.addColorStop(0.5, '#001233');
        gradient.addColorStop(1, '#000814');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Ajouter une √©toile filante occasionnellement
        if (Math.random() < 0.01 && shootingStars.length < 3) {
            shootingStars.push(new ShootingStar());
        }

        // Dessiner et mettre √† jour les √©toiles filantes
        shootingStars = shootingStars.filter(star => star.opacity > 0);
        shootingStars.forEach(star => {
            star.update();
            star.draw();
        });

        // Dessiner et mettre √† jour les corps c√©lestes
        celestialBodies.forEach(body => {
            body.update();
            body.draw();
        });

        requestAnimationFrame(animate);
    }

    animate();
</script>

<style>
    @keyframes float {
        0%,
        100% {
            transform: translateY(0) translateX(0);
        }
        25% {
            transform: translateY(-20px) translateX(10px);
        }
        50% {
            transform: translateY(-40px) translateX(-10px);
        }
        75% {
            transform: translateY(-20px) translateX(5px);
        }
    }
</style>
